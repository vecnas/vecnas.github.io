<h3>bindUi</h3>

<h4>Начало</h4>

Переменная определения приложения записывается в формате JSON. Она включает следующие основные секции:

<pre><code class="js">
    var appRoot = {
        id: "...",
        views: ...,
        templates: ...,
        ajax: ...,
        events: ...,
        states: ....,
        logic: ....,
        models: ....
    }
</code></pre>

Каждая часть опциональна, см. соответствующую страницу для детального описания.

После объявления всех компонентов приложения, реализации виджетов и шаблонов (как описано в их секциях),
по событию document.ready сделайте вызов

<pre><code class="js">
    $(function() {
       jiant.bindUi(prefix, appRoot, true);
    });
</code></pre>

<ul>
    <li><b>prefix</b> - объясняется в разделах виджетов и шаблонов и используется только для них.</li>
    <li><b>appRoot</b> - собственно переменная содержащая определение приложения, объявленная выше</li>
    <li>третий параметр включает режим разработки DEV_MODE, полезный как раз во время разработки</li>
</ul>

Теперь все методы реализованы, код связан с HTML реализацией и приложение готово к использованию.

<h4>Несколько приложений на странице</h4>
В рамках одной страницы может быть загружено любое количество приложений.
Просто вызовите <b>bindUi</b> несколько раз - по одному на каждое приложение

<h4>Параметры bindUi</h4>

Полное определение <b>bindUi</b> выглядит следующим образом:

<pre><code class="js">
    bindUi(prefix, root, devMode, viewsUrl, injectId)
</code></pre>

<ul>
    <li><b>prefix</b> - определяет префикс к идентификатору и классу для HTML элементов при привязке виджетов и
        шаблонов.
        Предположим он равен "_". Тогда виджет объявленный как "mainView" будет привязан к элементу $("#_mainView")
    </li>
    <li><b>root</b> - переменная определения, как описано в примере выше</li>
    <li><b>devMode</b> - включает и выключает режим разработки. Практически всегда стоит его включить</li>
    <li><b>viewsUrl</b> - URL для удаленной загрузки HTML с реализацией виджетов и шаблонов.
        Смотрите раздел кроссдомен для деталей
    </li>
    <li><b>injectId</b> - задает элемент для размещения удаленно загруженного HTML, см. кроссдомен для деталей</li>
</ul>

<h4>Сокращения</h4>

все подсекции в определении могут быть сокращены до одной буквы, например - models - m, logic - l и так далее.
Таким образом, код будет выглядеть:

<pre><code class="js">
    jiant.onUiBound(app, function($, app) {
       app.v.mainView ....
        // app.views.mainView ...
       app.a.sendToServer(....
      // app.ajax.sendToServer(...
    })
</code></pre>
Полный список:
<ul>
    <li>(v)iews</li>
    <li>(m)odels</li>
    <li>(l)ogic</li>
    <li>(s)tates</li>
    <li>(e)vents</li>
    <li>(a)jax</li>
    <li>(t)emplates</li>
</ul>

<h4>onUiBound</h4>

Основной способ реализации кода приложения - через <b>onUiBound</b> функцию. Такой способ позволяет хранить
глобальное пространство имен чистым и дружественно к минификации кода.
В функцию передается коллбэк который вызывается после связывания приложения, или немедленно,
если приложение уже связано. Коллбэку передается два параметра: jQuery объект и переменная определения приложения
(appRoot из кода выше). Например:

<pre><code class="js">
    jiant.onUiBound(appRoot, dependenciesList, function($, app) {
       // now all appRoot.views assigned, let's dance
    });
</code></pre>

Несколько приложений также поддерживается, см. далее.
        <p></p>
Важно: всегда используйте приложение как первый параметр (переменную определения или строку равную идентификатору приложения)

<h4>Детали реализации</h4>

Во время вызова <b>bindUi</b> выполняются следующие действия:
<ol>
    <li>выставить DEV_MODE из 3го параметра или из строки запроса браузера</li>
    <li>привязать виджеты (views) если определены в переменной определения, с проверкой существования</li>
    <li>привязать шаблоны (templates) если определены в переменной определения, с проверкой существования</li>
    <li>реализовать ajax функции</li>
    <li>реализовать события (events)</li>
    <li>реализовать состояния (states)</li>
    <li>реализовать модели (models)</li>
    <li>реализовать абстракции логики (logic)</li>
    <li>все ошибки связывания печатаются в консоль</li>
    <li>в конце, если выставлен DEV_MODE и есть ошибки - показывается алерт с общей информацией об ошибках связывания</li>
    <li>кидается событие onUiBound и срабатывают все коллбэки</li>
</ol>
