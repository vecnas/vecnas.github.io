<h4>Связывание приложения</h4>
Основная концепция jiant - связывание приложения. Создается переменная специального формата, затем вызывается
функция связывания приложения, которая реализует множество пустых объявлений и на выходе получаем набор работающего функционала.
<p></p>

Переменная определения приложения записывается в формате JSON. Она включает следующие основные секции:

<pre><code class="js">
    var appRoot = {
        id: "...",
        modules: ....,
        views: ...,
        templates: ...,
        ajax: ...,
        events: ...,
        states: ....,
        logic: ....,
        intl: ....,
        semaphores: ....,
        models: ....
    }
</code></pre>

Каждая часть опциональна, описана в соответствующей секции.

После объявления всех компонентов приложения, спецификации виджетов и шаблонов (как описано в их секциях),
по событию document.ready сделайте вызов

<pre><code class="js">
    $(function() {
        jiant.DEV_MODE = true;
        jiant.app(appRoot);
    });
</code></pre>

либо

<pre><code class="js">
    $(function() {
        jiant.bindUi(prefix, appRoot, true);
    });
</code></pre>

<ul>
    <li><b>prefix</b> - объясняется в разделах виджетов и шаблонов и используется только для них, более правильный способ
      - объявить как настройку в спецификации приложения <b>appPrefix</b>.</li>
    <li><b>appRoot</b> - собственно переменная, содержащая определение приложения, объявленная выше</li>
    <li>третий параметр включает режим разработки DEV_MODE, полезный как раз во время разработки, более правильный способ
      - прямо выставить его через вызов <b>jiant.DEV_MODE = true</b></li>
</ul>
После вызова <b>jiant.app</b> все методы реализованы, код связан с HTML реализацией и приложение готово к использованию.

<h4>Несколько приложений на странице</h4>
В рамках одной страницы может быть загружено любое количество приложений.
Просто вызовите <b>app</b> несколько раз - по одному на каждое приложение

<h4>app или bindUi</h4>
Есть две функции для связывания приложения, одна из них - <b>jiant.app</b> принимает один параметр,
переменную приложения, и внутри вызывает <b>bindUi</b>
<pre><code class="js">
    bindUi(app.appPrefix, app, undefined, app.viewsUrl, app.injectId);
</code></pre>

На текущий момент <b>jiant.app</b> - самый правильный способ связывания,
все настройки нужно делать через конфигурацию самого приложения.

<h4>Параметры bindUi</h4>

Полное определение <b>bindUi</b> выглядит следующим образом:

<pre><code class="js">
    bindUi(prefix, root, devMode, viewsUrl, injectId)
</code></pre>

<ul>
    <li><b>prefix</b> - определяет префикс к идентификатору и классу для HTML элементов при привязке виджетов и
      шаблонов. Предположим он равен "_". Тогда виджет объявленный как "mainView"
      будет привязан к элементу $("#_mainView"). При использовании <b>jiant.app</b>
        - заменяется настройкой приложения <b>appPrefix</b>
    </li>
    <li><b>root</b> - переменная определения приложения</li>
    <li><b>devMode</b> - включает и выключает режим разработки</li>
    <li><b>viewsUrl</b> - URL для удаленной загрузки HTML с реализацией виджетов и шаблонов.
        При использовании <b>jiant.app</b> - заменяется настройкой приложения <b>viewsUrl</b>
    </li>
    <li><b>injectId</b> - задает элемент для размещения удаленно загруженного HTML. При использовании <b>jiant.app</b>
            - заменяется настройкой приложения <b>injectId</b></li>
</ul>

<h4>Сокращения</h4>

подсекции в определении могут быть сокращены до одной буквы, например - models - m, logic - l и так далее.
Таким образом, код будет выглядеть:

<pre><code class="js">
    jiant.onApp(app, function($, app) {
       app.v.mainView ....
        // app.views.mainView ...
       app.a.sendToServer(....
      // app.ajax.sendToServer(...
    })
</code></pre>
Полный список:
<ul>
    <li>(v)iews</li>
    <li>(m)odels</li>
    <li>(l)ogic</li>
    <li>(s)tates</li>
    <li>(e)vents</li>
    <li>(a)jax</li>
    <li>(i)ntl</li>
    <li>(sem)aphores</li>
    <li>(t)emplates</li>
</ul>


<h4>onApp</h4>

Основной способ реализации кода приложения - через <b>onApp</b> функцию. Такой способ позволяет хранить
глобальное пространство имен чистым и дружественно к минификации кода.
В функцию передается коллбэк который вызывается после связывания приложения, или немедленно,
если приложение уже связано. Коллбэку передается два параметра: jQuery объект и переменная определения приложения
(appRoot из кода выше). Например:

<pre><code class="js">
    jiant.onApp(appRoot, dependenciesList, function($, app) {
       // загружено, погнали
    });
</code></pre>

Несколько приложений также поддерживается, например
<pre><code class="js">
    jiant.onApp([appRoot, "sharedApp"], [[deps for appRoot], [deps for shared app]], function($, app, sharedApp) {
       // загружено, погнали
    });
</code></pre>
Приложение всегда передается как первый параметр (переменную определения или строку равную идентификатору приложения).
Зависимостей может не быть
<pre><code class="js">
    jiant.onApp(appRoot, function($, app, sharedApp) {
       // загружено, погнали
    });
</code></pre>


<h4>onUiBound</h4>
Изначально функция регистрации коллбэка на связывание называлась <b>onUiBound</b>, теперь правильно использовать
<b>onApp</b>. Практически это синонимы.

<h4>Смешивание приложений и кроссдоменность</h4>
Несколько клиентских приложений могут присутствовать на одной странице. Скрипт может быть специфическим для одного
или для нескольких и выполняться только тогда когда все необходимые приложения загружены
<pre><code class="js">
  jiant.onApp(app1, function($, app1) {});
  jiant.onApp([app1, app2], function($, app1, app2) {});
  jiant.onApp([app1, app2], [["dep1", "dep2"], ["dep"]], function($, app1, app2) {});
</code></pre>
Кроссдоменные настройки включаются флагом, при этом необходимый для работы приложения html код подгружается и добавляется к странице


<h4>Детали реализации</h4>

Во время вызова <b>bindUi</b> выполняются следующие действия:
<ol>
    <li>выставить DEV_MODE из 3го параметра или из строки запроса браузера</li>
    <li>привязать виджеты (views) если определены в переменной определения, с проверкой существования</li>
    <li>привязать шаблоны (templates) если определены в переменной определения, с проверкой существования</li>
    <li>реализовать ajax функции</li>
    <li>реализовать события (events)</li>
    <li>реализовать состояния (states)</li>
    <li>реализовать модели (models)</li>
    <li>реализовать абстракции логики (logic)</li>
    <li>все ошибки связывания печатаются в консоль</li>
    <li>в конце, если выставлен DEV_MODE и есть ошибки - показывается алерт с общей информацией об ошибках связывания</li>
    <li>кидается событие onUiBound и срабатывают все коллбэки</li>
</ol>
